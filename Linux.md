

[TOC]

# 01 Linux系统介绍



## 1.1 windows和linux操作系统的区别

- | **Windows**                                           | **linux**                  |
  | ----------------------------------------------------- | -------------------------- |
  | 单用户操作系统，有盘符概念                            | 多用户操作系统，无盘符概念 |
  | windows文件夹是操作系统   Program files是安装过的软件 | home下是子用户文件夹       |

## 1.2 linux文件夹结构

- linux只有一个根目录/，所有文件都在它下面

![img](file:///C:/Users/ADMINI~1/AppData/Local/Temp/msohtmlclip1/01/clip_image001.png)

## 1.3 linux主要目录速查表

- | /              | 根目录                                                       |
  | -------------- | ------------------------------------------------------------ |
  | /etc           | 系统配置文件                                                 |
  | /bin、/usr/bin | 可执行二进制文件，如常用命令ls、tar、mv、cat等               |
  | /root          | 系统管理员的家目录                                           |
  | /home          | 系统默认的用户家目录，新增用户账户时，用户的家目录存放在此目录下 |

# 02 Linux常用命令

## 2.0 常用命令

| **序号** | **命令**            | **对应英文**         | **作用**                                                     |
| -------- | ------------------- | -------------------- | :----------------------------------------------------------- |
| 01       | ls                  | list                 | 查看当前文件夹下的内容                                       |
| 02       | pwd                 | print work directory | 查看当前所在文件夹                                           |
| 03       | cd [目录名]         | change directory     | 切换文件夹                                                   |
| 04       | touch [文件夹]      | touch                | 如果文件不存在，新建文件                                     |
| 05       | mkdir [目录名]      | make directory       | 创建目录                                                     |
| 06       | rm [文件名]         | remove               | 删除指定的文件名                                             |
| 07       | clear               | clear                | 清屏                                                         |
| 08       | tree [目录名]       | tree                 | 以树状图列出文件目录结构                                     |
| 09       | cp 源文件 目标文件  | copy                 | 复制文件或目录                                               |
| 10       | mv 源文件 目标文件  | move                 | 1.移动文件或目录       2.文件或目录重命名                    |
| 11       | cat 文件名          | concatenate          | 查看文件内容、创建文件、文件合并、追加文件内容等             |
| 12       | more 文件名         | more                 | 分屏显示文件内容                                             |
| 13       | grep 搜索文本文件名 | grep                 | 搜索文件中指定文本内容，类似于查找                           |
| 14       | echo   文字内容     |                      | 在终端中显示参数指定的文字，通常和重定向联合使用             |
| 15       | 重定向>和>>         |                      | 1.>表示输出，会覆盖文件原有内容       <br />   2.>>表示追加，会将内容追加到已有文件末尾 |
| 16       | 管道\|              |                      | 将一个命令的输出通过管道作为另一个命令的输入                 |

## 2.1 ls命令

| **参数**    | **含义**                                         |
| ----------- | ------------------------------------------------ |
| -a          | 显示指定目录下所有子目录和文件，包括隐藏文件     |
| -l          | 以列表方式显示文件的详细信息                     |
| -l -h   -lh | 以列表方式显示文件的详细信息，文件大小表示更直观 |

- -l -h 和 -lh 效果一样
- ls | wc -w 查看当前文件夹文件数量

### *#命令与通配符的配合*

| 通配符 | 含义                                            |
| ------ | ----------------------------------------------- |
| *      | 代表任意个数的字符, eg: 1*，表示1开头的所有文件 |
| ?      | 代表任意一个字符                                |
| []     | 表示可以匹配字符组中的任意一个                  |
| [abc]  | 匹配a、b、c中的任意一个                         |
| [a-f]  | 匹配从a到f范围内的任意一个字符                  |

## 2.2 cd命令

注意：Linux所有的目录和文件名都是大小写敏感的

| **命令** | **含义**                                 |
| -------- | ---------------------------------------- |
| cd       | 切换到当前用户的主目录（/home/用户目录） |
| cd ~     | 切换到当前用户的主目录（/home/用户目录） |
| cd .     | 保持在当前目录                           |
| cd ..    | 切换到上级目录                           |
| cd -     | 可以在最近两次工作目录之间来回切换       |

### *#相对路径和绝对路径*

- 相对路径：在输入路径时，最前面不是/或者~，表示相对当前目录所在的目录位置
- 绝对路径：在输入路径时，最前面是/或者~，表示从根目录/家目录开始的具体目录位置

##  2.3 创建和删除操作（touch、mkdir、rm）

### 2.3.1 touch

- 创建文件或修改文件日期

  - 如果文件不存在，创建一个空白文件
  - 如果文件存在，修改文件的末次修改日期

### 2.3.2 mkdir

- 创建一个新的目录

  ​	 **-p   递归创建目录** 

- eg: （a/b/c/d）mkdir -p a/b/c/d

  注意：新建目录的名称不能与当前目录中已有的目录或文件同名

### 2.3.3 rm

- 删除文件或目录（文件删除后不能恢复）

| -f     | 强制删除，忽略不存在的文件，无需提示             |
| ------ | ------------------------------------------------ |
| **-r** | **递归删除目录下的内容，删除文件夹必须加此参数** |

## 2.4 拷贝和移动文件（tree、cp、mv）

### 2.4.1 tree

- 以树状图列出文件目录结构

| -d   | 1.只显示目录，不显示文件      |
| ---- | ----------------------------- |
|      | **2.不加d，目录和文件都显示** |

### 2.4.2 cp（拷贝）

| **-f** | **已经存在的目标文件直接覆盖，不会提示（危险）**             |
| ------ | ------------------------------------------------------------ |
| **-i** | **覆盖文件前提示（安全性）**                                 |
| **-r** | **若给出的源文件是*目录文件*，<br />则cp将递归复制该目录下的所有子目录和文件，目标文件必须为一个目录名** |

### 2.4.3 mv（移动或重命名）

| -i     | 覆盖文件前提示（安全性）                     |
| ------ | -------------------------------------------- |
| **-t** | **移动多个文件，eg: mv f1 f2 f3 -t tar-dir** |

##  2.5 查看文件内容（cat、more、grep）

### 2.5.1 cat

- 用来查看文件内容、创建文件、文件合并、追加文件内容等功能
- 一次显示所有的内容，适合查看内容较少的文本文件

| -b     | 对输出的非空行编号     |
| ------ | ---------------------- |
| **-n** | **对输出的所有行编号** |

*nl**命令和**cat -b**的效果一样*

### 2.5.2 more

- 分屏显示文件内容，每次只显示一页内容
- 适合于查看内容较多的文本文件

| 空格键      | 翻页               |
| ----------- | ------------------ |
| **Enter键** | **向下滚动一行**   |
| **b**       | **回滚一屏**       |
| **f**       | **前滚一屏**       |
| **/word**   | **搜索word字符串** |
| **q**       | **退出**           |

### 2.5.3 grep

- 文本搜索工具
- 允许进行模式查找（正则表达式）

| -n     | 显示匹配行及行号                             |
| ------ | -------------------------------------------- |
| **-v** | **显示不包含匹配文本的所有行（相当于求反）** |
| **-i** | **忽略大小写**                               |

### *#模式查找*（*正则表达式*）

| ^a      | 行首，搜寻以a开头的行      |
| ------- | -------------------------- |
| **ke$** | **行尾，搜寻以ke结束的行** |

## 2.6 其他（echo、重定向>和>>、管道 | ）

### 2.6.1 echo 文字内容

- echo会在终端显示参数指定的文字，通常和重定向联合使用（将会显示在终端的文字重定向显示在重定向的文件中）

### 2.6.2 重定向>和>>

- Linux允许将命令执行结果重定向到一个文件
- 将本应显示在终端的内容 输出/追加 到指定文件中

其中

- \> 表示输出，会覆盖文件原有的内容
- \>>表示追加，会将内容追加到已有文件的末尾

### 2.6.3 管道 |

- Linux允许将一个命令的输出 通过管道 作为另一个命令的输入
- | 分为左右两端，左端塞东西（写），右端取东西（读）

常用的管道命令：

- more：分屏显示内容
- grep：在命令执行结果的基础上查询指定的文本

## *#终端命令格式*

### *#命令格式*

command [-options] [parameter]

说明：

- command:      命令名，相应功能的英文单词或单词的缩写

- [-options]: 选项，可用来对命令进行控制，也可以省略

- parameter:      传给命令的参数，可以是零个、一个或者多个

[]代表可选

### *#查阅命令帮助信息*

**（1）--help**

command --help

说明：显示command命令的帮助信息

**（2）man**

man command

说明：查阅command命令的使用手册，man是manual的缩写

使用man的操作键

| **操作键**  | **功能**                               |
| ----------- | -------------------------------------- |
| **空格键**  | **显示手册页的下一屏**                 |
| **Enter键** | **一次滚动手册页的一行，一行一行显示** |
| **b**       | **回滚一屏**                           |
| **f**       | **前滚一屏**                           |
| **q**       | **退出**                               |
| **/word**   | **搜索word字符串**                     |

##  *#终端实用技巧*

- [ctrl,      shift, =] 放大终端窗口的字体显示
- [ctrl,      -] 缩小终端窗口的字体显示
- 以 . 开头的文件为隐藏文件，需要用-a参数才能显示
- ctrl +      c 退出选择，并且停止执行当前的命令 

# 03 远程管理常用命令

## 3.0 常用命令表

| 序号 | 命令               | 对应英文                      | 作用                              |
| ---- | ------------------ | ----------------------------- | --------------------------------- |
| 01   | shutdown 选项 时间 | shutdown                      | 关机/重新启动                     |
| 02   | ifconfig           | configure a network interface | 查看/配置计算机当前的网卡配置信息 |
| 03   | ping ip地址        | ping                          | 检测到目标ip地址的连接是否正常    |
| 04   | ssh                | secure   shell                | 关机/重新启动                     |
| 05   | scp                | secure   copy                 | 远程复制文件                      |


## 3.1 shutdown

| -r               | 重新启动                          |
| ---------------- | --------------------------------- |
| 常用命令格式示例 |                                   |
| shutdown -r now  | 重新启动操作系统，其中now表示现在 |
| shutdown now     | 立刻关机，其中now表示现在         |
| shutdown 20：25  | 系统在今天的20：25会关机          |
| shutdown +10     | 系统再过十分钟后自动关机          |
| shutdown -c      | 取消之前指定的关机计划            |

提示：

- 不指定选项和参数，默认1分钟时候关闭电脑
- 远程维护服务器时，最好不要关闭系统，应该重新启动系统

## 3.2 网卡和IP地址（ifconfig、ping）

- 电脑比作电话，网卡相当于SIM卡，IP地址相当于电话号码

### 3.2.1 ifconfig

- ifconfig：查看网卡配置信息
- ifconfig | grep inet：查看网卡对应的IP地址（域名）

提示：一台计算机中可能会有一个物理网卡和多个虚拟网卡，Linux中物理网卡的名字通常以ensXX表示

127.0.0.1是本地回环/环回地址，一般用来测试本机网卡是否正常

### 3.2.2 ping

- ping一般用于检测网络通与不通，数值越大，速度越慢
- ping IP地址：目标主机是否连接正常
- ping 127.0.0.1：测试本地网卡工作正常
- 原理：发送一个数据包，对方就要返回一个数据包，根据返回的数据包和时间，确定目标主机的存在

## 3.3 远程登录和复制文件（ssh、scp）

### 3.3.1 ssh

- 数据加密，数据压缩

  ​	ssh [-p port] user@remote

- user是远程服务器的用户名
- remote是远程服务器的ip（域名）
- port是SSH server监听的端口，如果不指定，默认为22

### 3.3.2 scp

| -r     | 若给出的源文件是文件夹，则需要加-r            |
| ------ | --------------------------------------------- |
| **-P** | **若远程SSH服务器的端口不是22，则指定端口号** |

示例：

- 把本地当前目录下的 01.py 文件复制到 远程家目录下的Desktop/01.py


- 注意：‘：’后面的路径如果不是绝对路径，则以用户的家目录作为参照路径

  ​		scp -P port 01.py user@remote:Desktop/01.py

- 
  把远程家目录下的 Desktop/01.py 文件复制到本地当前目录下的01.py

  ​		scp -P port user@remote:Desktop/01.py 01.py 

## 3.4 配置远程计算机的别名

ssh -p port user@remote

配置别名：在~/.ssh/config里面追加一下内容

Host dong

​		HostName ip地址

​		User 用户名

​		Port 22

保存之后，可以使用ssh dong 实现远程登录，scp同样可以使用

## 3.5 免密登录设置

步骤

- 配置公钥

  - 执行 ssh-keygen 即可生成SSH钥匙，一路回车即可

- 上传公钥到服务器

  - 执行 ssh-copy-id -p port user@remote， 可以让远程服务器记住公钥

# 04 系统信息，其他常用命令

## 4.1 时间和日期

| date    | 当前系统时间                          |
| ------- | ------------------------------------- |
| **cal** | **查看日历       -y，查看一年的日历** |

## 4.2 磁盘信息

| df -h                              | disk   free 显示磁盘剩余控件          |
| ---------------------------------- | ------------------------------------- |
| **du   -h 【目录名】**             | **disk   usage 显示目录下的文件大小** |
| **ls \|wc -w**                     | **查看文件夹文件数量**                |
| **ls -lR \| grep "^-"   \| wc -l** | **统计文件夹下文件个数，包括子文件**  |
| **ls -lR \| grep "^d"   \| wc -l** | **统计文件夹下目录个数，包括子目录**  |

提示：-h以人性化方式显示文件大小

## 4.3 进程信息

| ps aux   | process starus 查看进程的详细状况              |
| -------- | ---------------------------------------------- |
| **top**  | **动态显示运行中的进程并且排序，使用q退出top** |
| **kill** | **终止指定带好的进程， -9 表示强行终止**       |

- ps选项的说明

| a     | 显示终端上的所有进程，包括其他用户的进程 |
| ----- | ---------------------------------------- |
| **u** | **显示进程的详细状态**                   |
| **x** | **显示没有控制终端的进程**               |

## 4.4 查找文件

| find [路径] -name "*.py" | 查找指定路径下扩展名是.py的文件，包括子目录 |
| ------------------------ | ------------------------------------------- |
|                          |                                             |

- 如果省略路径，表示在当前文件夹下查找
- 通配符和find命令配合使用 

## 4.5 软链接（快捷方式）

| ln   -s 被链接的源文件 链接文件 | 建立文件的软链接，即创建快捷方式 |
| ------------------------------- | -------------------------------- |
|                                 |                                  |

注意：

- 没有-s选项建立的是一个硬链接文件

  - 两个文件占用相同大小的硬盘空间，工作中几乎不会用到

- 源文件要使用绝对路径，不能使用相对路径，方便移动链接文件后，仍能正常使用

## 4.6 打包和压缩

- windows常用rar
- mac常用zip
- Linux常用tar.gz

### 4.6.1 tar是Linux中最常用的备份工具，只负责打包，不负责压缩

格式：

- 打包文件

  tar -cvf 打包文件.tar 被打包的文件/路径…

- 解包文件

  tar -xvf 打包文件.tar

- tar选项说明

| c     | 生成档案文件，创建打包文件                                  |
| ----- | ----------------------------------------------------------- |
| **x** | **解开档案文件**                                            |
| **v** | **列出归档解档的详细过程，显示进度**                        |
| **f** | **指定档案文件名称，f后面一定是.tar文件，所以必须放在最后** |

注意：f必须放在最后，其他选项随意

### 4.6.2 压缩/解压缩（gzip）

- tar和gzip命令结合实现打包压缩

  - tar负责打包
  - gzip负责压缩，xxx.tar.gz

- 在tar命令中有一个选项-z可以调用gzip，从而实现压缩和解压缩功能


- 命令格式：
  - 压缩文件

    tar -zcvf 打包文件.tar.gz 被压缩的文件/路径…

  - 解压文件

    tar -zxvf 打包文件.tar.gz

  - 解压缩到指定路径

    tar -zxvf 打包文件.tar.gz -C 目标路径

| -C   | 解压缩到指定目录，注意：要解压缩的目录必须存在 |
| ---- | ---------------------------------------------- |
|      |                                                |

### 4.6.3 bzip2（two）

- 在tar命令中有一个选项-j可以调用bzip2，从而实现压缩xxx.tar.bz2

- 命令格式：

  - 压缩文件

    tar -jcvf 打包文件.tar.bz2 被压缩的文件/路径…

  - 解压文件

    tar -jxvf 打包文件.tar.bz2

| -C   | 解压缩到指定目录，注意：要解压缩的目录必须存在 |
| ---- | ---------------------------------------------- |
|      |                                                |

## 4.7 软件安装

- apt 是Linux下的一款安装包管理工具

- 示例
  - 安装软件

    sudo apt install 软件包

  - 卸载软件

    sudo apt remove 软件名

  - 更新包

    sudo apt upgrade 